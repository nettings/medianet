# medianet system configuration
#
# The contents of this file are read by systemd unit files in
# overlay/etc/systemd/system and medianet tools in bin/ and
# overlay/usr/local/bin.

# boot settings (hardware support)

CONFIG_TXT_OPTIONS="
dtparam=audio=off
dtoverlay=pi3-disable-wifi
dtoverlay=pi3-disable-bt
dtoverlay=hifiberry-dacplus
"


# ALSA mixer settings

# persistent storage for mixer settings:
ALSA_STATEFILE="/var/medianet/alsa/asound.state"
# mixer control to use for user volume control: 
ALSA_VOLUME="Digital"
# default volume in %:
ALSA_VOLUME_DEFAULT="85"


# systemd configuration:

# re-run bin/mn_set_systemd_services after making changes!
SYSTEMD_DISABLE="
apt-daily-upgrade.timer
apt-daily.service
apt-daily-upgrade.service
apt-daily.timer
phpsessionclean.timer
hciuart.service
" 
SYSTEMD_ENABLE+="ufw.service "


# cpufreq.service sets the CPU clock speed on system startup

SYSTEMD_ENABLE+="cpufreq.service "
# flexible, but audio dropouts may occur
#CPUFREQ_SET_OPTIONS="-g ondemand --min 600MHz --max 1200MHz"
# rock-solid audio, but reduced CPU capability
#CPUFREQ_SET_OPTIONS="-g powersave --min 600MHz --max 600MHz"
# rock-solid audio, but high power consumption
CPUFREQ_SET_OPTIONS="-g performance --min 1200MHz --max 1200MHz"


# jackd.service provides the sound server that routes all audio

SYSTEMD_ENABLE+="jackd.service "
JACKD_OPTIONS="-R -P70 -dalsa -dhw:sndrpihifiberry -r48000 -p128 -n3 -zs"


# XXX_WAITPORT specifies a JACK port (or substring thereof) that the 
# corresponding service should wait for before starting (can be used
# to force JACK clients to start in a specific order and then handle
# all connections correctly).


# zita-n2j.service is a resampling network receiver for uncompressed audio signals

SYSTEMD_ENABLE+="zita-n2j.service "
ZITA_N2J_OPTIONS="--chan 2 --buff 20 239.0.0.1 3000 medianet0"
ZITA_N2J_WAITPORT="system:playback_1"


# zita-j2n.service is a network sender for uncompressed audio signals

#SYSTEMD_ENABLE+="zita-j2n.service "
# be sure to avoid multiple senders to the same multicast address!
#ZITA_J2N_OPTIONS="--chan 2 239.0.0.1 3000 medianet0"
#ZITA_J2N_WAITPORT="system:playback_1"


# zita-a2j.service is a resampling receiver from unsynchronized local audio interfaces

#SYSTEMD_ENABLE+="zita-a2j.service "
#ZITA_A2J_OPTIONS="-d hw:sndrpihifiberry -c 2 -r 44100 -p 128 -n 2 -Q 32"
#ZITA_A2J_WAITPORT="system:playback_1"


# zita-j2a.service is a resampling sender to unsynchronized local audio interfaces

#SYSTEMD_ENABLE+="zita-j2a.service "
#ZITA_J2A_OPTIONS="-d hw:sndrpihifiberry -c 2 -p 256 -n 2 -Q 32"
#ZITA_J2A_WAITPORT="system:playback_1"


# zita-lrx.service is a flexible N-channel M-way speaker crossover

#SYSTEMD_ENABLE+="zita-lrx "
#ZITA_LRX_OPTIONS="/medianet/config/this/zita-lrx.conf"


# mod-host.service is a LV2 plugin host for arbitrary DSP signal graphs

SYSTEMD_ENABLE+="mod-host.service "
MOD_SETTINGSDIR="/var/medianet/mod-host"
MOD_HOST_OPTIONS=""
MOD_HOST_WAITPORT="zita-n2j:out_2"
MOD_HOST_CONFIG="
add http://gareus.org/oss/lv2/fil4#mono 1
add urn:zamaudio:ZamComp 2
add http://stackingdwarves.net/lv2/sm 10
add http://plugin.org.uk/swh-plugins/lowpass_iir 11
add urn:zamaudio:ZaMaximX2 12
param_set 1 enable 1.0000
param_set 1 gain -2.0000
param_set 1 peakreset 1.0000
param_set 1 HighPass 1.0000
param_set 1 HPfreq 75.0000
param_set 1 HPQ 1.2432
param_set 1 LowPass 0.0000
param_set 1 LPfreq 20000.0000
param_set 1 LPQ 1.0000
param_set 1 LSsec 1.0000
param_set 1 LSfreq 300.0000
param_set 1 LSq 1.0000
param_set 1 LSgain 6.0000
param_set 1 sec1 1.0000
param_set 1 freq1 125.6117
param_set 1 q1 0.3145
param_set 1 gain1 -2.1960
param_set 1 sec2 1.0000
param_set 1 freq2 250.0000
param_set 1 q2 0.6000
param_set 1 gain2 -0.5000
param_set 1 sec3 1.0000
param_set 1 freq3 542.0009
param_set 1 q3 1.0000
param_set 1 gain3 -1.0440
param_set 1 sec4 1.0000
param_set 1 freq4 970.5770
param_set 1 q4 0.6000
param_set 1 gain4 -2.0000
param_set 1 HSsec 1.0000
param_set 1 HSfreq 6000.0000
param_set 1 HSq 1.4131
param_set 1 HSgain 6.0000
param_set 2 att 10.0000
param_set 2 rel 80.0000
param_set 2 kn 0.0000
param_set 2 rat 4.0000
param_set 2 thr 0.0000
param_set 2 mak 0.0000
param_set 2 slew 1.0000
param_set 2 sidech 0.0000
param_set 10 gain -4.0000
param_set 10 attL -6.0000
param_set 10 attOnL 1.0000
param_set 10 delayL 3.4500
param_set 10 delayLOn 1.0000
param_set 10 activeL 1.0000
param_set 10 attR 0.0000
param_set 10 attOnR 1.0000
param_set 10 delayR 0.0000
param_set 10 delayROn 1.0000
param_set 10 activeR 1.0000
param_set 11 cutoff 150.0000
param_set 11 stages 1.0000
param_set 12 rel 25.0000
param_set 12 ceil -3.0000
param_set 12 thresh 0.0000
connect effect_1:out effect_2:lv2_audio_in_1
connect effect_2:lv2_audio_out_1 effect_10:inL
connect effect_2:lv2_audio_out_1 effect_10:inR
connect effect_10:outL effect_12:lv2_audio_in_1
connect effect_10:outR effect_11:input
connect effect_11:output effect_12:lv2_audio_in_2
connect effect_12:lv2_audio_out_1 system:playback_1
connect effect_12:lv2_audio_out_2 system:playback_2
connect zita-n2j:out_2 effect_1:in
"
