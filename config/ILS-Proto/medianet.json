{
	"product": "ILS Prototype",
	"description": "Intelligent Lectern Systems Prototype",
	"hostname": "ils-proto",
	"location": "Showroom",
	"version": "2019-05-23",
	"bootConfig": {
		"arm_freq" : 1200,
		"hdmi_blanking" : 2,
		"gpio" : [
			"12,16,26,7,8,25,24,23,22,17,27,13=ip,pu"
		],
		"dtparam" : [
			"audio=off"
		],
		"dtoverlay" : [
			"pi3-disable-wifi",
			"pi3-disable-bt",
			"hifiberry-dacplus"
		]
	},
	"alsaOptions": {
		"master": [
			"Digital"
		],
		"masterDefault": "-3dB"
	},
	"systemdUnits": [
		{
			"unit"    : "cpufreq",
			"type"    : "service",
			"enabled" : 1,
			"options" : "-g performance -d 1200MHz -u 1200MHz"
		},
		{
			"unit"    : "gpioctl",
			"type"    : "service",
			"enabled" : 1,
			"options" : "-r 12,16,alsa,Digital -s 26,alsa,Digital -r 8,7,jack,43,1 -s 25,jack,44,1,1 -r 23,24,jack,45,1 -s 22,jack,46,1,1 -r 27,17,jack,47,1 -s 13,jack,48,1,1"
		},
		{
			"unit"    : "jackd", 
			"type"    : "service",
			"enabled" : 1,
			"jackName": "system",
			"options" : "-R -t 4500 -P 70 -dalsa -dhw:U192k -D -r48000 -p64 -n4 -zs",
			"inPorts": [
				{
					"portName"   : "playback_1"
				},
				{
					"portName"   : "playback_2"
				},
				{
					"portName"   : "playback_3"
				},
				{
					"portName"   : "playback_4"
				}
			],
			"outPorts": [
				{
					"portName"   : "capture_1",
					"targetUnit" : "mod-host",
					"targetPort" : 0
				},
				{
					"portName"   : "capture_2",
					"targetUnit" : "mod-host",
					"targetPort" : 1
				},
				{
					"portName"   : "capture_3",
					"targetUnit" : "mod-host",
					"targetPort" : 2
				},
				{
					"portName"   : "capture_4",
					"targetUnit" : "mod-host",
					"targetPort" : 3
				}
			
			]
		},
		{
			"unit"    : "jackminimix",
			"type"    : "service",
			"enabled" : 1,
			"jackName": "mixer",
			"options" : "-n %jackName% -p 3043 -q -c 2",
			"inPorts" : [
				{
					"portName"   : "in1_left"
				},
				{
					"portName"   : "in1_right"
				},
				{
					"portName"   : "in2_left"
				},
				{
					"portName"   : "in2_right"
				}
			],
			"outPorts": [
				{
					"portName"   : "out_left",
					"targetUnit" : "zita-j2a",
					"targetPort" : 0
				},
				{
					"portName"   : "out_right",
					"targetUnit" : "zita-j2a",
					"targetPort" : 1
				}
			]
		},
		{
			"unit"    : "mn_config_watch",
			"type"    : "service",
			"enabled" : 1
		},
		{
			"unit"    : "mod-host",
			"type"    : "service",
			"enabled" : 1,
			"jackName": "mod-host",
			"options" : "",
			"inPorts" : [
				{
					"portName"   : "effect_1:inL"
				},
				{
					"portName"   : "effect_1:inR"
				},
				{
					"portName"   : "effect_11:inL"
				},
				{
					"portName"   : "effect_11:inR"
				}
			],
			"outPorts": [
				{
					"portName"   : "effect_9:outL",
					"targetUnit"     : "jackminimix",
					"targetPort" : 0
				},{
					"portName"   : "effect_9:outR",
					"targetUnit"     : "jackminimix",
					"targetPort" : 1
				},
				{
					"portName"   : "effect_19:outL",
					"targetUnit"     : "jackminimix",
					"targetPort" : 2
				},{
					"portName"   : "effect_19:outR",
					"targetUnit"     : "jackminimix",
					"targetPort" : 3
				}
			],
			"config": [
				"add http://gareus.org/oss/lv2/fil4#stereo 1",
				"add http://gareus.org/oss/lv2/dpl#stereo 9",
				"add http://gareus.org/oss/lv2/fil4#stereo 11",
				"add urn:zamaudio:ZamCompX2 12",
				"add http://gareus.org/oss/lv2/dpl#stereo 19",
 				"connect effect_1:outL effect_9:inL",
				"connect effect_1:outR effect_9:inR",
 				"connect effect_11:outL effect_12:lv2_audio_in_1",
				"connect effect_11:outR effect_12:lv2_audio_in_2",
				"connect effect_12:lv2_audio_out_1 effect_19:inL",
				"connect effect_12:lv2_audio_out_2 effect_19:inR",
				"connect effect_9:outL effect_12:lv2_sidechain_in",
				"connect effect_9:outR effect_12:lv2_sidechain_in",
				"connect gpioctl:midi_out effect_1:control",
				"connect gpioctl:midi_out effect_11:control",
				"midi_map 1 gain 1 41 -18 +18",
				"midi_map 11 gain 1 43 -18 +19",
				"param_set 9 threshold -2",
				"param_set 19 threshold -2"
			]
		},
		{
			"unit"    : "shairport-sync",
			"type"    : "service",
			"enabled" : 0,
			"jackName": "shairport-sync",
			"inPorts" : [],
			"outPorts": [
				{
					"portName"   : "out_L",
					"targetUnit" : "mod-host",
					"targetPort" : 0
				},
				{
					"portName"   : "out_R",
					"targetUnit" : "mod-host",
					"targetPort" : 1
				}					
			]
		},
		{
			"unit"    : "ufw",
			"type"    : "service",
			"enabled" : 1
		},
		{
			"unit"    : "zita-n2j",
			"type"    : "service",
			"enabled" : 1,
			"jackName": "zita-n2j",
			"options" : "--jname %jackName% --chan 1,2 --buff 20 239.0.0.1 3000 medianet0",
			"inPorts" : [],
			"outPorts": [
				{
					"portName"   : "out_1",
					"targetUnit" : "mod-host",
					"targetPort" : 2
				},
				{
					"portName"   : "out_2",
					"targetUnit" : "mod-host",
					"targetPort" : 3
				}
			]
		},
		{
			"unit"    : "zita-j2n",
			"type"    : "service",
			"enabled" : 0,
			"jackName": "zita-j2n",
			"options" : "--jname %jackName% --chan 2 239.0.0.1 3000 medianet0",
			"inPorts": [
				{
					"portName" : "in_1"
				},
				{
					"portName" : "in_2"
				}
			]
		},
		{
			"unit"    : "zita-a2j",
			"type"    : "service",
			"enabled" : 0,
			"jackName": "zita-a2j",
			"options" : "-j %jackName% -d hw:sndrpihifiberry -c 2 -r 44100 -p 64 -n 2 -zs",
			"outPorts": [
				{
					"portName" : "capture_1"
				},
				{
					"portName" : "capture_2"
				}
			]
		},
		{
			"unit"    : "zita-j2a",
			"type"    : "service",
			"enabled" : 1,
			"jackName": "zita-j2a",
			"options" : "-j %jackName% -d hw:sndrpihifiberry -c 2 -r 48000 -p 64 -n 2",
			"inPorts" : [
				{
					"portName" : "playback_1"
				},
				{
					"portName" : "playback_2"
				}
			]
		},
		{
			"unit"    : "zita-lrx",
			"type"    : "service",
			"enabled" : 0,
			"options" : "",
			"jackName": "zita-lrx",
			"inPorts" : [
				{
					"portName" : "inp-L"
				},
				{
					"portName" : "inp-R"
				}
			],
			"outPorts": [
				{
					"portName" : "out-L.sub"
				},
				{
					"portName" : "out-L.mid"
				},
				{
					"portName" : "out-L.high."
				},
				{
					"portName" : "out-R.sub"
				},
				{
					"portName" : "out-R.mid"
				},
				{
					"portName" : "out-R.high"
				}
			],
			"config": [
				"# Two channels, three frequency bands.",
				"/zita-lrx       2  3",
				"# Channel names.",
				"/chann/label    1  L",
				"/chann/label    2  R",
				"# Output port suffixes.",
				"/fband/suffix   1  sub",
				"/fband/suffix   2  mid",
				"/fband/suffix   3  high",
				"# Xover filters, first is Linkwitz-Riley, second is modified.",
				"/xover/freq     1  80",
				"/xover/freq     2  3000",
				"/xover/shape    2  -4.0",
				"# Subwoofer signals are summed on first output.",
				"# MF amplifier on outputs 3 and 4, 2 dB gain, 0.4 ms delay.",
				"/fband/gain     2  2.0",
				"/fband/delay    2  0.4"
			]
		}
	]
}
