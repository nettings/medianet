#!/bin/bash

. /medianet/bin/mn_includes

. $MEDIANETCONF

/usr/sbin/alsactl -f "$ALSA_STATEFILE" $@

if [[ $1 == store ]] ; then
  # dump volume value to separate file to avoid having to parse asound.state :)
  amixer sget "$ALSA_VOLUME" | grep -Eo \[[0-9]+%\] | grep -Eo [0-9]+ > "$ALSA_VOLUME_FILE"
fi
