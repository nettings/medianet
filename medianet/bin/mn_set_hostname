#!/bin/bash

# This helper creates a unique host name based on the non-vendor part of the ethernet MAC address.
MAC_LOCALPART=`ip link show |  awk '$1 ~ /ether/ { print $2 }' | sed 's/\://g' | head -n 1 | cut -c 7-12`
NEW_HOSTNAME="mn_$MAC_LOCALPART"
echo -n "Setting hostname to $NEW_HOSTNAME..."
echo "$NEW_HOSTNAME" > /etc/hostname && echo " succeeded." || echo " failed."
echo -n "Modifying hosts file..."
sed -i "s/$HOSTNAME/$NEW_HOSTNAME/g" /etc/hosts && echo " succeeded." || echo " failed."
